<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
	<!-- <meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval'"> -->
    <!-- <!-- <link rel="stylesheet" type="text/css" href="css/index.css" /> --> -->
    <title>Go-Obat</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/jasny-bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/navmenu-reveal.css" rel="stylesheet">
      <!-- your stylesheet with modifications -->
   <link href="css/custom.css" rel="stylesheet">

    <script src="js/js/respond.min.js"></script>
    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
   
		<div class="navmenu navmenu-default navmenu-fixed-left">
			<a class="navmenu-brand" href="#">Project name</a>
			<ul class="nav navmenu-nav">
				<li><a href="../navmenu/">Slide in</a></li>
				<li><a href="../navmenu-push/">Push</a></li>
				<li class="active"><a href="./">Reveal</a></li>
				<li><a href="../navbar-offcanvas/">Off canvas navbar</a></li>
			</ul>

		</div>
    <div class="canvas">
	
	<div class='all'>

      <div class="navbar navbar-default navbar-fixed-top">
        <button type="button" class="navbar-toggle" style="border:none;" data-toggle="offcanvas" data-recalc="false" data-target=".navmenu" data-canvas=".canvas">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
		
				
      </div>
			<div id='contentslider'>
			
			</div>
			<p>
			<div id='contentsliderpromo'>
			
			</div>
			<p>
			<p>
			<div class="well well-sm">
				<strong>Produk terbaru</strong>
				<div class="btn-group">
					<a href="#" id="list" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-th-list">
					</span>List</a> <a href="#" id="grid" class="btn btn-default btn-sm"><span
						class="glyphicon glyphicon-th"></span>Grid</a>
				</div>
			</div>
			<div id="Detailproductsname" class="row list-group">
			</div>
		
	</div><!-- /.container -->
    </div>

   <div id="footer">
  <div class="col-xs-12 navbar-default navbar-fixed-bottom">
  <div class="row" id="bottomNav">
    <div class="col-xs-3 text-center "><a href="#" id='home'><i class="glyphicon glyphicon-home navbarButton" style="font-size: 2em;"></i></a></div>
    <div class="col-xs-3 text-center "><a href="#"><i class="glyphicon glyphicon-shopping-cart navbarButton" style="font-size: 2em;"></i></a></div>
    <div class="col-xs-3 text-center "><a href="#"><i class="glyphicon glyphicon-tasks navbarButton" style="font-size: 2em;"></i></a></div>
    <div class="col-xs-3 text-center "><a href="#" id='login'><i class="glyphicon glyphicon-user navbarButton" style="font-size: 2em;"></i></a></div>
  </div>

  </div>
</div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

	<script src="js/webservice.js"></script>
	<script src="js/js/jquery-1.11.0.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jasny-bootstrap.min.js"></script>
    <script src="js/jssor.slider-22.1.9.mini.js" type="text/javascript"></script>
	
	<script src="js/form.js"></script>
	<script src="js/array.js"></script>
	<script src="js/jquery.js"></script>
	<!-- Bootstrap Core JavaScript -->
	<script src="js/md5.min.js"></script>
	<script src="controller/auth.js"></script>

  </body>
</html>
<style>
.navbarButton:link {
    color: green;
}

/* visited link */
.navbarButton:visited {
    color: green;
}

/* mouse over link */
.navbarButton:hover {
    color: #22a488;
}

.navbarButton {
    color: #ffd966;
}


</style>
<script type="text/javascript">

$("#home").attr("href","#");
$("#login").attr("href","view/Auth/login.html");

	
$(".col-xs-3, .text-center").hover(function(){
        $(this).css("background-color", "#ffd966");
        }, function(){
        $(this).css("background-color", "#22a488");
    });
$(".navbarButton").hover(function(){
        $(this).css("background-color", "#ffd966");
        }, function(){
        $(this).css("background-color", "#22a488");
    });

	$('body, .navbar-collapse form[role="search"] button[type="reset"]').on('click keyup', function(event) {
			console.log(event.currentTarget);
			if (event.which == 27 && $('.navbar-collapse form[role="search"]').hasClass('active') ||
				$(event.currentTarget).attr('type') == 'reset') {
				closeSearch();
			}
		});

		function closeSearch() {
            var $form = $('.navbar-collapse form[role="search"].active')
    		$form.find('input').val('');
			$form.removeClass('active');
		}

		// Show Search if form is not active // event.preventDefault() is important, this prevents the form from submitting
		$(document).on('click', '.navbar-collapse form[role="search"]:not(.active) button[type="submit"]', function(event) {
			event.preventDefault();
			var $form = $(this).closest('form'),
				$input = $form.find('input');
			$form.addClass('active');
			$input.focus();

		});
		// ONLY FOR DEMO // Please use $('form').submit(function(event)) to track from submission
		// if your form is ajax remember to call `closeSearch()` to close the search container
		$(document).on('click', '.navbar-collapse form[role="search"].active button[type="submit"]', function(event) {
			event.preventDefault();
			var $form = $(this).closest('form'),
				$input = $form.find('input');
			$('#showSearchTerm').text($input.val());
            closeSearch()
		});
		
		$('#list').click(function(event){event.preventDefault();$('#Detailproductsname .item').addClass('list-group-item');});
		$('#grid').click(function(event){event.preventDefault();$('#Detailproductsname .item').removeClass('list-group-item');$('#Detailproductsname .item').addClass('grid-group-item');});
		
		webService.initialize();
	var idCustomer = localStorage.getItem('idCustomer');
	if (idCustomer != null){
		var promise1 = webService.readPromiseXml('countries',111);
		 
		var filterArray1 = ['id_customer',idCustomer];
		var promise2 = webService.readPromiseXml('carts',webService.filterGenerator(filterArray1));
		promise2.success(function(data){
			var carts = webService.searchPromise(data);
			var idCart = carts[carts.length-1];
			localStorage.setItem('idCart',idCart);
			
			if (idCart == 'undefined'){	
				idCart
			}else if(idCart == 0){
				idCart
			}else if(idCart == 'null'){
				idCart
			}else{
				var promise3 = webService.readPromiseXml('carts',idCart);
				promise3.success(function(data){
					var cart = $(data).children().children()[0].children[19].children[0].children;
					console.log(cart);	
					$.each(cart, function(key, value) {
						hasil = new Array();
						hasil[key] = value;
						localStorage.setItem('cartRow_'+key,hasil[''+key+''].children[key].textContent);
						console.log(localStorage.getItem('cartRow_'+key));	
					});		
					localStorage.setItem('cartsLength',cart.length);
					$('#navbar').load("view/templates/navbar.html");
				});
			}
		});
		
	}
	
	var filterArray2 = ['active',1];	
	var promise4 = webService.filterPromiseJson('products','active',1);
	promise4.success(function(data){
		for(var i=0;i<100;i++){	
		idProducts = $(data)["0"].products[""+i+""].id;
			var promise5 = webService.readPromiseJson('products',idProducts);
			promise5.success(function(data){
			console.log(data);
			var getNameProducts = data["product"]["name"];
			var NameProducts = getNameProducts.substring(0, 16);
			if (NameProducts.length == 16){
				NameProducts = getNameProducts.substring(0, 16)+'...';
			}
			console.log(NameProducts.length);
				var Detailproductsname ='';
				var Detailproductsnamecategori ='';
				var apiIdProduct = data["product"]["id"];
				var apiIdSupplier = data["product"]["id_supplier"];
				var price = data["product"]["price"];
				var bilangan = parseInt(price);
					
				var	number_string = bilangan.toString(),
					sisa 	= number_string.length % 3,
					rupiah 	= number_string.substr(0, sisa),
					ribuan 	= number_string.substr(sisa).match(/\d{3}/g);
						
				if (ribuan) {
					separator = sisa ? '.' : '';
					rupiah += separator + ribuan.join('.');
				}

					
				var apiIdImage = data["product"]["associations"]["images"][0]["id"];

				var div1 ='<div class="item  col-xs-6 col-md-4">';
				var div2 ='<div class="thumbnail">';
				var setUrlImageProduts = urlapi+"images/products/"+apiIdProduct+"/"+apiIdImage+"/medium_default?ws_key="+key;
				var imgSrc = '<img style="width:8em; height:8em;"src="'+setUrlImageProduts+'" alt="">';
				var classCaption ='<div class="caption">';
				var contentCaption ='<span style="font-weight:bold" class="group inner list-group-item-heading">'+NameProducts+'</span>';
				var contentCaptionDescription ='<p class="group inner list-group-item-text"></p>';
				var div3 ='<div class="row">';
				var div31 ='<div>';
				var contentDiv31 ='<p class="col-xs-6 col-md-4">Rp.'+rupiah+'</p>';
				var endDiv31 ='</div>';
				var div4 ='<div class="col-xs-6 col-md-4">';
				var contentDiv4 ='<a class="btn btn-success" href="view/orders/index.html?id='+apiIdProduct+'">Beli</a>';
				var endDiv4 ='</div></div></div></div></div></div>';
				
				 
				 alls = div1+div2+imgSrc+classCaption+contentCaption+contentCaptionDescription+div3+div31+contentDiv31+endDiv31+div4+contentDiv4+endDiv4;

				$("#Detailproductsname").append(alls);
				//$('#categories').append(Detailproductsnamecategori);
			});
		}	
	});
   $('#contentslider').load("view/templates/sliderProduct.html");
   $('#contentsliderpromo').load("view/templates/standard.html");
	$('#navbar').load("view/templates/navbar.html");
	$('#top').load("view/templates/top.html");
	$("#carts").click(function(){
		alert("The paragraph was clicked.");
	});
	$.ajaxSetup({ cache: true });
	console.timeEnd(promise4);
		
           
    
    </script>